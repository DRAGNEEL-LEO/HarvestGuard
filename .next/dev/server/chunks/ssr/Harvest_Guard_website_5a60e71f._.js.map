{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/Harvest_Guard/website/components/farmer-profile.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Trophy, Leaf, AlertCircle } from \"lucide-react\"\r\n\r\ninterface Farmer {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  phone: string\r\n  preferredLanguage: \"en\" | \"bn\"\r\n  createdAt: string\r\n}\r\n\r\ninterface Props {\r\n  farmer: Farmer\r\n  language: \"en\" | \"bn\"\r\n}\r\n\r\nexport default function FarmerProfile({ farmer, language }: Props) {\r\n  const content = {\r\n    en: {\r\n      profile_title: \"Your Profile\",\r\n      name: \"Name\",\r\n      email: \"Email\",\r\n      phone: \"Phone\",\r\n      joined: \"Member Since\",\r\n      language: \"Language\",\r\n      achievements: \"Achievements\",\r\n      first_harvest: \"First Harvest Logged\",\r\n      risk_expert: \"Risk Mitigator\",\r\n      data_guardian: \"Data Guardian\",\r\n      english: \"English\",\r\n      bangla: \"Bangla\",\r\n    },\r\n    bn: {\r\n      profile_title: \"আপনার প্রোফাইল\",\r\n      name: \"নাম\",\r\n      email: \"ইমেইল\",\r\n      phone: \"ফোন\",\r\n      joined: \"যোগদানের সময়\",\r\n      language: \"ভাষা\",\r\n      achievements: \"অর্জন\",\r\n      first_harvest: \"প্রথম ফসল লগ করা হয়েছে\",\r\n      risk_expert: \"ঝুঁকি প্রশমনকারী\",\r\n      data_guardian: \"ডেটা সংরক্ষক\",\r\n      english: \"English\",\r\n      bangla: \"বাংলা\",\r\n    },\r\n  }\r\n\r\n  const t = content[language]\r\n\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString)\r\n    return date.toLocaleDateString(language === \"en\" ? \"en-US\" : \"bn-BD\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-background rounded-2xl shadow-md border border-muted p-8\">\r\n      <h3 className=\"text-2xl font-bold text-foreground mb-6\">{t.profile_title}</h3>\r\n\r\n      <div className=\"space-y-4 mb-8\">\r\n        <div>\r\n          <p className=\"text-sm text-muted-foreground\">{t.name}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{farmer.name}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-sm text-muted-foreground\">{t.email}</p>\r\n          <p className=\"text-lg font-semibold text-foreground break-all\">{farmer.email}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-sm text-muted-foreground\">{t.phone}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{farmer.phone}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-sm text-muted-foreground\">{t.language}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">\r\n            {farmer.preferredLanguage === \"en\" ? t.english : t.bangla}\r\n          </p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-sm text-muted-foreground\">{t.joined}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{formatDate(farmer.createdAt)}</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Achievement Badges */}\r\n      <div>\r\n        <h4 className=\"text-lg font-semibold text-foreground mb-4\">{t.achievements}</h4>\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex items-center gap-3 p-3 bg-primary/10 rounded-lg\">\r\n            <Trophy className=\"w-6 h-6 text-accent\" />\r\n            <span className=\"text-sm font-medium text-foreground\">{t.first_harvest}</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-3 p-3 bg-accent/10 rounded-lg opacity-50\">\r\n            <AlertCircle className=\"w-6 h-6 text-primary\" />\r\n            <span className=\"text-sm font-medium text-foreground\">{t.risk_expert}</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-3 p-3 bg-secondary/10 rounded-lg opacity-50\">\r\n            <Leaf className=\"w-6 h-6 text-secondary\" />\r\n            <span className=\"text-sm font-medium text-foreground\">{t.data_guardian}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAFA;;;AAkBe,SAAS,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAS;IAC/D,MAAM,UAAU;QACd,IAAI;YACF,eAAe;YACf,MAAM;YACN,OAAO;YACP,OAAO;YACP,QAAQ;YACR,UAAU;YACV,cAAc;YACd,eAAe;YACf,aAAa;YACb,eAAe;YACf,SAAS;YACT,QAAQ;QACV;QACA,IAAI;YACF,eAAe;YACf,MAAM;YACN,OAAO;YACP,OAAO;YACP,QAAQ;YACR,UAAU;YACV,cAAc;YACd,eAAe;YACf,aAAa;YACb,eAAe;YACf,SAAS;YACT,QAAQ;QACV;IACF;IAEA,MAAM,IAAI,OAAO,CAAC,SAAS;IAE3B,MAAM,aAAa,CAAC;QAClB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,aAAa,OAAO,UAAU;IAC/D;IAEA,qBACE,yYAAC;QAAI,WAAU;;0BACb,yYAAC;gBAAG,WAAU;0BAA2C,EAAE,aAAa;;;;;;0BAExE,yYAAC;gBAAI,WAAU;;kCACb,yYAAC;;0CACC,yYAAC;gCAAE,WAAU;0CAAiC,EAAE,IAAI;;;;;;0CACpD,yYAAC;gCAAE,WAAU;0CAAyC,OAAO,IAAI;;;;;;;;;;;;kCAEnE,yYAAC;;0CACC,yYAAC;gCAAE,WAAU;0CAAiC,EAAE,KAAK;;;;;;0CACrD,yYAAC;gCAAE,WAAU;0CAAmD,OAAO,KAAK;;;;;;;;;;;;kCAE9E,yYAAC;;0CACC,yYAAC;gCAAE,WAAU;0CAAiC,EAAE,KAAK;;;;;;0CACrD,yYAAC;gCAAE,WAAU;0CAAyC,OAAO,KAAK;;;;;;;;;;;;kCAEpE,yYAAC;;0CACC,yYAAC;gCAAE,WAAU;0CAAiC,EAAE,QAAQ;;;;;;0CACxD,yYAAC;gCAAE,WAAU;0CACV,OAAO,iBAAiB,KAAK,OAAO,EAAE,OAAO,GAAG,EAAE,MAAM;;;;;;;;;;;;kCAG7D,yYAAC;;0CACC,yYAAC;gCAAE,WAAU;0CAAiC,EAAE,MAAM;;;;;;0CACtD,yYAAC;gCAAE,WAAU;0CAAyC,WAAW,OAAO,SAAS;;;;;;;;;;;;;;;;;;0BAKrF,yYAAC;;kCACC,yYAAC;wBAAG,WAAU;kCAA8C,EAAE,YAAY;;;;;;kCAC1E,yYAAC;wBAAI,WAAU;;0CACb,yYAAC;gCAAI,WAAU;;kDACb,yYAAC,gUAAM;wCAAC,WAAU;;;;;;kDAClB,yYAAC;wCAAK,WAAU;kDAAuC,EAAE,aAAa;;;;;;;;;;;;0CAExE,yYAAC;gCAAI,WAAU;;kDACb,yYAAC,mVAAW;wCAAC,WAAU;;;;;;kDACvB,yYAAC;wCAAK,WAAU;kDAAuC,EAAE,WAAW;;;;;;;;;;;;0CAEtE,yYAAC;gCAAI,WAAU;;kDACb,yYAAC,0TAAI;wCAAC,WAAU;;;;;;kDAChB,yYAAC;wCAAK,WAAU;kDAAuC,EAAE,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMlF"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/Harvest_Guard/website/hooks/use-weather.ts"],"sourcesContent":["import { useEffect, useRef, useState } from 'react'\r\n\r\ntype Weather = {\r\n  location: string\r\n  temperature?: number\r\n  humidity?: number\r\n  rainChance?: number\r\n  windSpeed?: number\r\n  condition?: string\r\n  forecast?: any[]\r\n  error?: string\r\n}\r\n\r\nconst CACHE_TTL = 1000 * 60 * 5 // 5 minutes\r\n\r\nconst cache = new Map<string, { ts: number; data: Weather }>()\r\n\r\nasync function fetchWeather(location: string): Promise<Weather> {\r\n  try {\r\n    const res = await fetch(`/api/weather?location=${encodeURIComponent(location)}`)\r\n    if (!res.ok) {\r\n      return { location, error: 'Failed to fetch' }\r\n    }\r\n    const data = await res.json()\r\n    return { location, ...data }\r\n  } catch (err: any) {\r\n    return { location, error: err?.message || 'Error' }\r\n  }\r\n}\r\n\r\nexport function useWeather(locations: string[]) {\r\n  const [state, setState] = useState<Record<string, Weather | null>>({})\r\n  const mounted = useRef(true)\r\n\r\n  useEffect(() => {\r\n    mounted.current = true\r\n    return () => {\r\n      mounted.current = false\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    let cancelled = false\r\n    async function loadAll() {\r\n      const results: Record<string, Weather | null> = {}\r\n      const toFetch: string[] = []\r\n      const now = Date.now()\r\n      for (const loc of locations) {\r\n        const key = loc || 'Dhaka'\r\n        const cached = cache.get(key)\r\n        if (cached && now - cached.ts < CACHE_TTL) {\r\n          results[key] = cached.data\r\n        } else {\r\n          results[key] = null\r\n          toFetch.push(key)\r\n        }\r\n      }\r\n\r\n      if (!cancelled && mounted.current) setState((s) => ({ ...s, ...results }))\r\n\r\n      await Promise.all(\r\n        toFetch.map(async (loc) => {\r\n          const data = await fetchWeather(loc)\r\n          cache.set(loc, { ts: Date.now(), data })\r\n          if (!cancelled && mounted.current) setState((s) => ({ ...s, [loc]: data }))\r\n        })\r\n      )\r\n    }\r\n\r\n    if (locations && locations.length > 0) loadAll()\r\n\r\n    return () => {\r\n      cancelled = true\r\n    }\r\n  }, [locations.join('|')])\r\n\r\n  return state\r\n}\r\n\r\nexport function clearWeatherCache() {\r\n  cache.clear()\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAaA,MAAM,YAAY,OAAO,KAAK,EAAE,YAAY;;AAE5C,MAAM,QAAQ,IAAI;AAElB,eAAe,aAAa,QAAgB;IAC1C,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,CAAC,sBAAsB,EAAE,mBAAmB,WAAW;QAC/E,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,OAAO;gBAAE;gBAAU,OAAO;YAAkB;QAC9C;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,OAAO;YAAE;YAAU,GAAG,IAAI;QAAC;IAC7B,EAAE,OAAO,KAAU;QACjB,OAAO;YAAE;YAAU,OAAO,KAAK,WAAW;QAAQ;IACpD;AACF;AAEO,SAAS,WAAW,SAAmB;IAC5C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4WAAQ,EAAiC,CAAC;IACpE,MAAM,UAAU,IAAA,0WAAM,EAAC;IAEvB,IAAA,6WAAS,EAAC;QACR,QAAQ,OAAO,GAAG;QAClB,OAAO;YACL,QAAQ,OAAO,GAAG;QACpB;IACF,GAAG,EAAE;IAEL,IAAA,6WAAS,EAAC;QACR,IAAI,YAAY;QAChB,eAAe;YACb,MAAM,UAA0C,CAAC;YACjD,MAAM,UAAoB,EAAE;YAC5B,MAAM,MAAM,KAAK,GAAG;YACpB,KAAK,MAAM,OAAO,UAAW;gBAC3B,MAAM,MAAM,OAAO;gBACnB,MAAM,SAAS,MAAM,GAAG,CAAC;gBACzB,IAAI,UAAU,MAAM,OAAO,EAAE,GAAG,WAAW;oBACzC,OAAO,CAAC,IAAI,GAAG,OAAO,IAAI;gBAC5B,OAAO;oBACL,OAAO,CAAC,IAAI,GAAG;oBACf,QAAQ,IAAI,CAAC;gBACf;YACF;YAEA,IAAI,CAAC,aAAa,QAAQ,OAAO,EAAE,SAAS,CAAC,IAAM,CAAC;oBAAE,GAAG,CAAC;oBAAE,GAAG,OAAO;gBAAC,CAAC;YAExE,MAAM,QAAQ,GAAG,CACf,QAAQ,GAAG,CAAC,OAAO;gBACjB,MAAM,OAAO,MAAM,aAAa;gBAChC,MAAM,GAAG,CAAC,KAAK;oBAAE,IAAI,KAAK,GAAG;oBAAI;gBAAK;gBACtC,IAAI,CAAC,aAAa,QAAQ,OAAO,EAAE,SAAS,CAAC,IAAM,CAAC;wBAAE,GAAG,CAAC;wBAAE,CAAC,IAAI,EAAE;oBAAK,CAAC;YAC3E;QAEJ;QAEA,IAAI,aAAa,UAAU,MAAM,GAAG,GAAG;QAEvC,OAAO;YACL,YAAY;QACd;IACF,GAAG;QAAC,UAAU,IAAI,CAAC;KAAK;IAExB,OAAO;AACT;AAEO,SAAS;IACd,MAAM,KAAK;AACb"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/Harvest_Guard/website/components/crop-batch-list.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React from 'react'\r\nimport { Leaf, AlertTriangle, CheckCircle } from \"lucide-react\"\r\nimport { useWeather } from '@/hooks/use-weather'\r\nimport { formatFloat } from '@/lib/utils'\r\n\r\ninterface CropBatch {\r\n  id: string\r\n  cropType: string\r\n  estimatedWeight: number\r\n  harvestDate: string\r\n  storageLocation: string\r\n  storageType: string\r\n  status: \"active\" | \"completed\"\r\n  createdAt: string\r\n  lossEvents: number\r\n  interventionSuccessRate: number\r\n}\r\n\r\ninterface Props {\r\n  batches: CropBatch[]\r\n  language: \"en\" | \"bn\"\r\n}\r\n\r\nexport default function CropBatchList({ batches, language }: Props) {\r\n  const content = {\r\n    en: {\r\n      status_active: \"Active\",\r\n      status_completed: \"Completed\",\r\n      weight: \"Weight\",\r\n      location: \"Location\",\r\n      storage: \"Storage\",\r\n      harvest: \"Harvest Date\",\r\n      loss_events: \"Loss Events\",\r\n      success_rate: \"Success Rate\",\r\n    },\r\n    bn: {\r\n      status_active: \"সক্রিয়\",\r\n      status_completed: \"সম্পন্ন\",\r\n      weight: \"ওজন\",\r\n      location: \"অবস্থান\",\r\n      storage: \"সংরক্ষণ\",\r\n      harvest: \"ফসল কাটার তারিখ\",\r\n      loss_events: \"ক্ষতির ঘটনা\",\r\n      success_rate: \"সাফল্যের হার\",\r\n    },\r\n  }\r\n\r\n  const t = content[language]\r\n\r\n  const activeBatches = batches.filter((b) => b.status === \"active\")\r\n  const completedBatches = batches.filter((b) => b.status === \"completed\")\r\n\r\n  // Prefetch weather for all unique locations used by batches\r\n  const uniqueLocations = Array.from(new Set(batches.map((b) => b.storageLocation || 'Dhaka')))\r\n  const weatherMap = useWeather(uniqueLocations)\r\n\r\n  // Crop-specific risk multipliers (simple heuristics)\r\n  const cropRiskFactors: Record<string, { humidityFactor: number; tempFactor: number; storageSensitivity: number }> = {\r\n    'Paddy/Rice': { humidityFactor: 1.2, tempFactor: 1.0, storageSensitivity: 1.1 },\r\n    Rice: { humidityFactor: 1.2, tempFactor: 1.0, storageSensitivity: 1.1 },\r\n    Wheat: { humidityFactor: 1.0, tempFactor: 0.9, storageSensitivity: 1.0 },\r\n    Maize: { humidityFactor: 1.1, tempFactor: 1.0, storageSensitivity: 1.05 },\r\n  }\r\n\r\n  function computeRiskForBatch(batch: CropBatch) {\r\n    const loc = batch.storageLocation || 'Dhaka'\r\n    const w = weatherMap[loc]\r\n    const humidity = w?.humidity ?? 70\r\n    const rain = w?.rainChance ?? 0\r\n    const temp = w?.temperature ?? 28\r\n\r\n    const crop = batch.cropType || 'Paddy/Rice'\r\n    const factors = cropRiskFactors[crop] || { humidityFactor: 1.0, tempFactor: 1.0, storageSensitivity: 1.0 }\r\n\r\n    let risk = 0\r\n    // humidity\r\n    if (humidity > 65) risk += (humidity - 65) * 0.8 * factors.humidityFactor\r\n    // rain\r\n    risk += rain * 0.35\r\n    // temperature\r\n    if (temp >= 35) risk += 8 * factors.tempFactor\r\n    // storage type sensitivity\r\n    if (batch.storageType && !/sealed|airtight|container/i.test(batch.storageType)) risk += 8 * factors.storageSensitivity\r\n    // history and interventions\r\n    risk += (batch.lossEvents || 0) * 6\r\n    risk -= (batch.interventionSuccessRate || 0) * 0.25\r\n    if (risk < 0) risk = 0\r\n    if (risk > 100) risk = 100\r\n\r\n    const expectedLossPercent = Math.min(50, Math.round(risk * 0.35))\r\n\r\n    // suggestions\r\n    const suggestions: string[] = []\r\n    if (rain > 50) suggestions.push(language === 'en' ? 'Cover stored batches and improve drainage to avoid water ingress.' : 'সংরক্ষিত ব্যাচগুলি ঢেকে রাখুন এবং জল ​​প্রবেশ এড়াতে নিষ্কাশন উন্নত করুন।')\r\n    if (humidity > 75) suggestions.push(language === 'en' ? 'Increase ventilation or use desiccants to reduce humidity.' : 'বায়ুচলাচল বাড়ান বা আর্দ্রতা কমাতে ডেসিক্যান্ট ব্যবহার করুন।')\r\n    if (temp >= 35) suggestions.push(language === 'en' ? 'Move produce to cooler storage or provide shade to reduce heat stress.' : 'ঠান্ডা সংরক্ষণে স্থানান্তর করুন বা তাপ চাপ কমাতে ছায়া প্রদান করুন।')\r\n    if ((batch.interventionSuccessRate || 0) < 50) suggestions.push(language === 'en' ? 'Review past interventions and increase monitoring frequency.' : 'পূর্ববর্তী হস্তক্ষেপ পর্যালোচনা করুন এবং পর্যবেক্ষণের ফ্রিকোয়েন্সি বাড়ান।')\r\n    if (suggestions.length === 0) suggestions.push(language === 'en' ? 'No immediate actions — continue regular monitoring.' : 'তৎক্ষণাৎ কোনো পদক্ষেপ প্রয়োজন নেই — নিয়মিত পর্যবেক্ষণ চালিয়ে যান।')\r\n\r\n    return { risk, expectedLossPercent, weather: w || null, suggestions }\r\n  }\r\n\r\n  // Aggregated report for active batches\r\n  const aggregated = React.useMemo(() => {\r\n    if (activeBatches.length === 0) return null\r\n    let totalRisk = 0\r\n    let totalExpectedLoss = 0\r\n    for (const b of activeBatches) {\r\n      const { risk, expectedLossPercent } = computeRiskForBatch(b)\r\n      totalRisk += risk\r\n      totalExpectedLoss += expectedLossPercent\r\n    }\r\n    return {\r\n      averageRisk: Math.round(totalRisk / activeBatches.length),\r\n      averageExpectedLoss: Math.round(totalExpectedLoss / activeBatches.length),\r\n      count: activeBatches.length,\r\n    }\r\n  }, [batches.map((b) => b.id).join('|'), JSON.stringify(weatherMap)])\r\n\r\n  const renderBatchCard = (batch: CropBatch) => {\r\n    const computed = computeRiskForBatch(batch)\r\n    return (\r\n    <div\r\n      key={batch.id}\r\n      className=\"bg-background rounded-xl shadow-md border border-muted p-6 hover:shadow-lg transition-shadow\"\r\n    >\r\n      <div className=\"flex justify-between items-start mb-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Leaf className=\"w-6 h-6 text-primary\" />\r\n          <div>\r\n            <h4 className=\"text-xl font-bold text-foreground\">{batch.cropType}</h4>\r\n            <p className=\"text-sm text-muted-foreground\">ID: {batch.id}</p>\r\n          </div>\r\n        </div>\r\n        <span\r\n          className={`px-3 py-1 rounded-full text-sm font-semibold ${\r\n            batch.status === \"active\" ? \"bg-green-100 text-green-700\" : \"bg-gray-100 text-gray-700\"\r\n          }`}\r\n        >\r\n          {batch.status === \"active\" ? t.status_active : t.status_completed}\r\n        </span>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4 mb-4\">\r\n        <div>\r\n          <p className=\"text-xs text-muted-foreground\">{t.weight}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{batch.estimatedWeight} kg</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs text-muted-foreground\">{t.location}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{batch.storageLocation}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs text-muted-foreground\">{t.harvest}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{new Date(batch.harvestDate).toLocaleDateString()}</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-xs text-muted-foreground\">{t.storage}</p>\r\n          <p className=\"text-lg font-semibold text-foreground\">{batch.storageType}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-muted\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <AlertTriangle className=\"w-4 h-4 text-orange-500\" />\r\n          <div>\r\n            <p className=\"text-xs text-muted-foreground\">{t.loss_events}</p>\r\n            <p className=\"text-sm font-semibold text-foreground\">{batch.lossEvents}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <CheckCircle className=\"w-4 h-4 text-green-500\" />\r\n          <div>\r\n            <p className=\"text-xs text-muted-foreground\">{t.success_rate}</p>\r\n            <p className=\"text-sm font-semibold text-foreground\">{formatFloat(batch.interventionSuccessRate)}%</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* Weather / Risk summary */}\r\n      <div className=\"mt-4 pt-4 border-t border-muted\">\r\n        <BatchWeatherAndRisk\r\n          batch={batch}\r\n          language={language}\r\n          weather={computed.weather}\r\n          risk={computed.risk}\r\n          expectedLossPercent={computed.expectedLossPercent}\r\n          suggestions={computed.suggestions}\r\n        />\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      {aggregated && (\r\n        <div className=\"p-4 rounded-lg bg-background border border-muted\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <div className=\"text-sm text-muted-foreground\">{language === 'en' ? 'Active batches summary' : 'সক্রিয় ব্যাচ সারাংশ'}</div>\r\n              <div className=\"text-lg font-semibold\">{language === 'en' ? `${aggregated.count} batches` : `${aggregated.count} টি ব্যাচ`}</div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-sm text-muted-foreground\">{language === 'en' ? 'Avg. Risk' : 'গড় ঝুঁকি'}</div>\r\n              <div className=\"text-xl font-bold text-foreground\">{formatFloat(aggregated.averageRisk)}%</div>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"text-sm text-muted-foreground\">{language === 'en' ? 'Est. Loss' : 'আনুমানিক ক্ষতি'}</div>\r\n              <div className=\"text-xl font-bold text-foreground\">{formatFloat(aggregated.averageExpectedLoss)}%</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      {activeBatches.length > 0 && (\r\n        <div>\r\n          <h4 className=\"text-lg font-semibold text-foreground mb-4\">\r\n            {language === \"en\" ? \"Active Batches\" : \"সক্রিয় ব্যাচ\"}\r\n          </h4>\r\n          <div className=\"grid gap-4\">{activeBatches.map(renderBatchCard)}</div>\r\n        </div>\r\n      )}\r\n\r\n      {completedBatches.length > 0 && (\r\n        <div>\r\n          <h4 className=\"text-lg font-semibold text-foreground mb-4\">\r\n            {language === \"en\" ? \"Completed Batches\" : \"সম্পন্ন ব্যাচ\"}\r\n          </h4>\r\n          <div className=\"grid gap-4\">{completedBatches.map(renderBatchCard)}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction BatchWeatherAndRisk({\r\n  batch,\r\n  language,\r\n  weather,\r\n  risk,\r\n  expectedLossPercent,\r\n  suggestions,\r\n}: {\r\n  batch: any\r\n  language: 'en' | 'bn'\r\n  weather: any\r\n  risk: number\r\n  expectedLossPercent: number\r\n  suggestions: string[]\r\n}) {\r\n  if (!weather) {\r\n    return <p className=\"text-sm text-muted-foreground\">{language === 'en' ? 'Weather unavailable' : 'আবহাওয়া উপলব্ধ নেই'}</p>\r\n  }\r\n\r\n  const humidity = weather.humidity || 70\r\n  const rain = weather.rainChance || 0\r\n  const temp = weather.temperature || 28\r\n\r\n  return (\r\n    <div className=\"grid md:grid-cols-3 gap-4 items-start\">\r\n      <div>\r\n        <p className=\"text-xs text-muted-foreground\">{language === 'en' ? 'Weather' : 'আবহাওয়া'}</p>\r\n        <p className=\"text-sm font-semibold\">{weather.condition} · {formatFloat(temp)}°C</p>\r\n        <p className=\"text-xs text-muted-foreground\">{language === 'en' ? `Humidity: ${formatFloat(humidity)}%` : `আর্দ্রতা: ${formatFloat(humidity)}%`}</p>\r\n        <p className=\"text-xs text-muted-foreground\">{language === 'en' ? `Rain chance: ${formatFloat(rain)}%` : `বৃষ্টির সম্ভাবনা: ${formatFloat(rain)}%`}</p>\r\n      </div>\r\n\r\n      <div>\r\n        <p className=\"text-xs text-muted-foreground\">{language === 'en' ? 'Risk Score' : 'ঝুঁকি স্কোর'}</p>\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-full bg-muted h-3 rounded overflow-hidden\">\r\n            <div className=\"h-3 bg-orange-400\" style={{ width: `${risk}%` }} />\r\n          </div>\r\n          <div className=\"text-sm font-semibold\">{formatFloat(risk)}%</div>\r\n        </div>\r\n        <p className=\"text-xs text-muted-foreground mt-2\">{language === 'en' ? `Estimated loss: ${formatFloat(expectedLossPercent)}%` : `আনুমানিক ক্ষতি: ${formatFloat(expectedLossPercent)}%`}</p>\r\n      </div>\r\n\r\n      <div>\r\n        <p className=\"text-xs text-muted-foreground\">{language === 'en' ? 'Suggestions' : 'প্রস্তাবনা'}</p>\r\n        <ul className=\"list-disc ml-4 mt-2 text-sm text-foreground\">\r\n          {suggestions.map((s, i) => (\r\n            <li key={i}>{s}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1126, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/Harvest_Guard/website/lib/crops.ts"],"sourcesContent":["export const BANGLADESH_CROPS = [\r\n  { value: \"Paddy/Rice\", en: \"Paddy/Rice\", bn: \"ধান/চাল\" },\r\n  { value: \"Wheat\", en: \"Wheat\", bn: \"গম\" },\r\n  { value: \"Maize\", en: \"Maize\", bn: \"ভুট্টা\" },\r\n  { value: \"Pulses\", en: \"Pulses\", bn: \"ডাল/শিম\" },\r\n  { value: \"Potatoes\", en: \"Potatoes\", bn: \"আলু\" },\r\n  { value: \"Onions\", en: \"Onions\", bn: \"পেঁয়াজ\" },\r\n  { value: \"Garlic\", en: \"Garlic\", bn: \"রসুন\" },\r\n  { value: \"Tomatoes\", en: \"Tomatoes\", bn: \"টমেটো\" },\r\n  { value: \"Cabbage\", en: \"Cabbage\", bn: \"কপি/স্তন\" },\r\n  { value: \"Cauliflower\", en: \"Cauliflower\", bn: \"ফুলকপি\" },\r\n  { value: \"Brinjal\", en: \"Brinjal\", bn: \"বেগুন\" },\r\n  { value: \"Cucumber\", en: \"Cucumber\", bn: \"শসা\" },\r\n  { value: \"Pumpkin\", en: \"Pumpkin\", bn: \"কুমড়ো\" },\r\n  { value: \"Jute\", en: \"Jute\", bn: \"পাট\" },\r\n  { value: \"Cotton\", en: \"Cotton\", bn: \"কটন\" },\r\n  { value: \"Sugar Cane\", en: \"Sugar Cane\", bn: \"চিনিগোলার\" },\r\n  { value: \"Mustard\", en: \"Mustard\", bn: \"সরিষা\" },\r\n  { value: \"Sesame\", en: \"Sesame\", bn: \"তিল\" },\r\n  { value: \"Turmeric\", en: \"Turmeric\", bn: \"হলুদ\" },\r\n  { value: \"Ginger\", en: \"Ginger\", bn: \"আদা\" },\r\n]\r\n\r\nexport type CropItem = {\r\n  value: string\r\n  en: string\r\n  bn: string\r\n}\r\n\r\nexport const cropLabel = (item: CropItem, lang: \"en\" | \"bn\") => (lang === \"bn\" ? item.bn : item.en)\r\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,mBAAmB;IAC9B;QAAE,OAAO;QAAc,IAAI;QAAc,IAAI;IAAU;IACvD;QAAE,OAAO;QAAS,IAAI;QAAS,IAAI;IAAK;IACxC;QAAE,OAAO;QAAS,IAAI;QAAS,IAAI;IAAS;IAC5C;QAAE,OAAO;QAAU,IAAI;QAAU,IAAI;IAAU;IAC/C;QAAE,OAAO;QAAY,IAAI;QAAY,IAAI;IAAM;IAC/C;QAAE,OAAO;QAAU,IAAI;QAAU,IAAI;IAAU;IAC/C;QAAE,OAAO;QAAU,IAAI;QAAU,IAAI;IAAO;IAC5C;QAAE,OAAO;QAAY,IAAI;QAAY,IAAI;IAAQ;IACjD;QAAE,OAAO;QAAW,IAAI;QAAW,IAAI;IAAW;IAClD;QAAE,OAAO;QAAe,IAAI;QAAe,IAAI;IAAS;IACxD;QAAE,OAAO;QAAW,IAAI;QAAW,IAAI;IAAQ;IAC/C;QAAE,OAAO;QAAY,IAAI;QAAY,IAAI;IAAM;IAC/C;QAAE,OAAO;QAAW,IAAI;QAAW,IAAI;IAAS;IAChD;QAAE,OAAO;QAAQ,IAAI;QAAQ,IAAI;IAAM;IACvC;QAAE,OAAO;QAAU,IAAI;QAAU,IAAI;IAAM;IAC3C;QAAE,OAAO;QAAc,IAAI;QAAc,IAAI;IAAY;IACzD;QAAE,OAAO;QAAW,IAAI;QAAW,IAAI;IAAQ;IAC/C;QAAE,OAAO;QAAU,IAAI;QAAU,IAAI;IAAM;IAC3C;QAAE,OAAO;QAAY,IAAI;QAAY,IAAI;IAAO;IAChD;QAAE,OAAO;QAAU,IAAI;QAAU,IAAI;IAAM;CAC5C;AAQM,MAAM,YAAY,CAAC,MAAgB,OAAuB,SAAS,OAAO,KAAK,EAAE,GAAG,KAAK,EAAE"}},
    {"offset": {"line": 1239, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/Harvest_Guard/website/components/crop-batch-form.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState } from \"react\"\r\nimport { X } from \"lucide-react\"\r\n\r\ninterface CropBatch {\r\n  cropType: string\r\n  estimatedWeight: number\r\n  harvestDate: string\r\n  storageLocation: string\r\n  storageType: string\r\n  status: \"active\" | \"completed\"\r\n}\r\n\r\nimport { BANGLADESH_CROPS, cropLabel } from \"@/lib/crops\"\r\n\r\ninterface Props {\r\n  onSubmit: (batch: CropBatch) => void\r\n  onCancel: () => void\r\n  language: \"en\" | \"bn\"\r\n  // accept either an array of string values or CropItem-like objects\r\n  availableCrops?: Array<string | { value: string; en?: string; bn?: string }>\r\n}\r\n\r\n  const divisions = [\"Dhaka\", \"Chittagong\", \"Khulna\", \"Rajshahi\", \"Barisal\", \"Sylhet\", \"Rangpur\", \"Mymensingh\"]\r\n\r\nconst storageTypes = [\"Jute Bag Stack\", \"Silo\", \"Open Area\", \"Warehouse\", \"Underground Bunker\"]\r\n\r\nexport default function CropBatchForm({ onSubmit, onCancel, language, availableCrops }: Props) {\r\n  const defaultCrop = (availableCrops ?? BANGLADESH_CROPS).length > 0 ? (availableCrops ?? BANGLADESH_CROPS)[0] : \"Paddy/Rice\"\r\n  const defaultValue = typeof defaultCrop === \"string\" ? defaultCrop : (defaultCrop as any).value ?? (defaultCrop as any).en\r\n\r\n  const [formData, setFormData] = useState<CropBatch>({\r\n    cropType: (defaultValue as string) || \"Paddy/Rice\",\r\n    estimatedWeight: 0,\r\n    harvestDate: \"\",\r\n    storageLocation: divisions[0],\r\n    storageType: storageTypes[0],\r\n    status: \"active\",\r\n  })\r\n\r\n  const content = {\r\n    en: {\r\n      title: \"Add New Crop Batch\",\r\n      crop_type: \"Crop Type\",\r\n      weight: \"Estimated Weight (kg)\",\r\n      harvest_date: \"Harvest Date\",\r\n      storage_location: \"Storage Location (Division)\",\r\n      storage_type: \"Storage Type\",\r\n      cancel: \"Cancel\",\r\n      submit: \"Register Batch\",\r\n    },\r\n    bn: {\r\n      title: \"নতুন ফসলের ব্যাচ যোগ করুন\",\r\n      crop_type: \"ফসলের ধরন\",\r\n      weight: \"আনুমানিক ওজন (কেজি)\",\r\n      harvest_date: \"ফসল কাটার তারিখ\",\r\n      storage_location: \"সংরক্ষণ স্থান (বিভাগ)\",\r\n      storage_type: \"সংরক্ষণ প্রকার\",\r\n      cancel: \"বাতিল করুন\",\r\n      submit: \"ব্যাচ নিবন্ধন করুন\",\r\n    },\r\n  }\r\n\r\n  const t = content[language]\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    onSubmit(formData)\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50\">\r\n      <div className=\"bg-background rounded-2xl shadow-lg max-w-lg w-full max-h-screen overflow-y-auto\">\r\n        <div className=\"sticky top-0 bg-background border-b border-muted flex justify-between items-center p-6\">\r\n          <h2 className=\"text-2xl font-bold text-foreground\">{t.title}</h2>\r\n          <button onClick={onCancel} className=\"text-muted-foreground hover:text-foreground transition-colors\">\r\n            <X className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">{t.crop_type}</label>\r\n            <select\r\n              value={formData.cropType}\r\n              onChange={(e) => setFormData({ ...formData, cropType: e.target.value })}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-muted focus:border-primary focus:outline-none transition-colors bg-background text-foreground\"\r\n            >\r\n              {(availableCrops ?? BANGLADESH_CROPS).map((c) => {\r\n                const item = typeof c === \"string\" ? { value: c, en: c, bn: c } : { value: c.value, en: c.en ?? c.value, bn: c.bn ?? c.en ?? c.value }\r\n                return (\r\n                  <option key={item.value} value={item.value}>\r\n                    {language === \"bn\" ? item.bn : item.en}\r\n                  </option>\r\n                )\r\n              })}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">{t.weight}</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              value={formData.estimatedWeight}\r\n              onChange={(e) => {\r\n                const parsed = Number.parseFloat(e.target.value)\r\n                setFormData({ ...formData, estimatedWeight: Number.isNaN(parsed) ? 0 : parsed })\r\n              }}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-muted focus:border-primary focus:outline-none transition-colors bg-background text-foreground\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">{t.harvest_date}</label>\r\n            <input\r\n              type=\"date\"\r\n              value={formData.harvestDate}\r\n              onChange={(e) => setFormData({ ...formData, harvestDate: e.target.value })}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-muted focus:border-primary focus:outline-none transition-colors bg-background text-foreground\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">{t.storage_location}</label>\r\n            <select\r\n              value={formData.storageLocation}\r\n              onChange={(e) => setFormData({ ...formData, storageLocation: e.target.value })}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-muted focus:border-primary focus:outline-none transition-colors bg-background text-foreground\"\r\n            >\r\n              {divisions.map((div) => (\r\n                <option key={div} value={div}>\r\n                  {div}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-foreground mb-2\">{t.storage_type}</label>\r\n            <select\r\n              value={formData.storageType}\r\n              onChange={(e) => setFormData({ ...formData, storageType: e.target.value })}\r\n              className=\"w-full px-4 py-3 rounded-lg border border-muted focus:border-primary focus:outline-none transition-colors bg-background text-foreground\"\r\n            >\r\n              {storageTypes.map((type) => (\r\n                <option key={type} value={type}>\r\n                  {type}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 pt-6\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onCancel}\r\n              className=\"flex-1 px-6 py-3 border-2 border-primary text-primary rounded-lg font-semibold hover:bg-primary/5 transition-colors\"\r\n            >\r\n              {t.cancel}\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"flex-1 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-colors\"\r\n            >\r\n              {t.submit}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1581, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/Harvest_Guard/website/app/dashboard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport Link from \"next/link\"\r\nimport { LogOut, Plus, Download } from \"lucide-react\"\r\nimport { useLanguage } from \"@/components/language-provider\"\r\nimport FarmerProfile from \"@/components/farmer-profile\"\r\nimport CropBatchList from \"@/components/crop-batch-list\"\r\nimport CropBatchForm from \"@/components/crop-batch-form\"\r\n\r\ninterface Farmer {\r\n  id: string\r\n  name: string\r\n  email: string\r\n  phone: string\r\n  preferredLanguage: \"en\" | \"bn\"\r\n  createdAt: string\r\n}\r\n\r\ninterface CropBatch {\r\n  id: string\r\n  cropType: string\r\n  estimatedWeight: number\r\n  harvestDate: string\r\n  storageLocation: string\r\n  storageType: string\r\n  status: \"active\" | \"completed\"\r\n  createdAt: string\r\n  lossEvents: number\r\n  interventionSuccessRate: number\r\n  moisture?: number\r\n  temperature?: number\r\n}\r\n\r\nimport { BANGLADESH_CROPS } from \"@/lib/crops\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\nexport default function DashboardPage() {\r\n  const { language, setLanguage } = useLanguage()\r\n  const [farmer, setFarmer] = useState<Farmer | null>(null)\r\n  const [cropBatches, setCropBatches] = useState<CropBatch[]>([])\r\n  const [showBatchForm, setShowBatchForm] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const content = {\r\n    en: {\r\n      title: \"Dashboard\",\r\n      welcome: \"Welcome\",\r\n      profile: \"Profile\",\r\n      crops: \"My Crops\",\r\n      new_batch: \"Add New Batch\",\r\n      export_data: \"Export Data\",\r\n      logout: \"Logout\",\r\n      no_batches: \"No active crop batches yet. Start by adding one.\",\r\n      loading: \"Loading your data...\",\r\n      language_bn: \"বাংলা\",\r\n      language_en: \"English\",\r\n      please_login: \"Please log in first\",\r\n      go_to_login: \"Go to Login\",\r\n    },\r\n    bn: {\r\n      title: \"ড্যাশবোর্ড\",\r\n      welcome: \"স্বাগতম\",\r\n      profile: \"প্রোফাইল\",\r\n      crops: \"আমার ফসল\",\r\n      new_batch: \"নতুন ব্যাচ যোগ করুন\",\r\n      export_data: \"ডেটা রপ্তানি করুন\",\r\n      logout: \"লগ আউট\",\r\n      no_batches: \"এখনও কোনো সক্রিয় ফসলের ব্যাচ নেই। একটি যোগ করে শুরু করুন।\",\r\n      loading: \"আপনার ডেটা লোড হচ্ছে...\",\r\n      language_bn: \"বাংলা\",\r\n      language_en: \"English\",\r\n      please_login: \"প্রথমে লগ ইন করুন\",\r\n      go_to_login: \"লগইন করুন\",\r\n    },\r\n  }\r\n\r\n  const t = content[language]\r\n\r\n  useEffect(() => {\r\n    // Load farmer and then user-scoped crop batches deterministically\r\n    try {\r\n      const storedFarmer = localStorage.getItem(\"currentUser\") || localStorage.getItem(\"farmer\")\r\n      let farmerData = null\r\n\r\n      if (storedFarmer) {\r\n        farmerData = JSON.parse(storedFarmer)\r\n        setFarmer(farmerData)\r\n        // Sync language with farmer's preferred language\r\n        if (farmerData.preferredLanguage) {\r\n          setLanguage(farmerData.preferredLanguage)\r\n        }\r\n      }\r\n\r\n      const batchesKey = farmerData ? `cropBatches_${farmerData.id}` : \"cropBatches\"\r\n      const storedBatches = localStorage.getItem(batchesKey) || localStorage.getItem(\"cropBatches\")\r\n\r\n      if (storedBatches) {\r\n        try {\r\n          setCropBatches(JSON.parse(storedBatches))\r\n        } catch (e) {\r\n          // ignore malformed storage\r\n        }\r\n      }\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [setLanguage])\r\n\r\n  // If a logged-in farmer exists, attempt to load authoritative batches from server\r\n  useEffect(() => {\r\n    const fetchServerBatches = async () => {\r\n      if (!farmer) return\r\n      try {\r\n        const res = await fetch(\"/api/batches\")\r\n        // Debugging logs to help capture server response\r\n        // eslint-disable-next-line no-console\r\n        console.debug('/api/batches GET status:', res.status)\r\n        const text = await res.text()\r\n        let json: any\r\n        try {\r\n          json = JSON.parse(text)\r\n        } catch {\r\n          // Not JSON response\r\n          // eslint-disable-next-line no-console\r\n          console.warn('/api/batches returned non-JSON:', text)\r\n          return\r\n        }\r\n        if (!res.ok) {\r\n          // eslint-disable-next-line no-console\r\n          console.warn('/api/batches GET not ok', json)\r\n          return\r\n        }\r\n        if (json?.data) {\r\n          // map server rows to client shape\r\n          const mapped = json.data.map((r: any) => ({\r\n            id: r.id,\r\n            cropType: r.crop_type,\r\n            estimatedWeight: Number(r.estimated_weight),\r\n            harvestDate: new Date(r.harvest_date).toISOString(),\r\n            storageLocation: r.storage_location,\r\n            storageType: r.storage_type,\r\n            status: r.status,\r\n            createdAt: r.created_at,\r\n            lossEvents: 0,\r\n            interventionSuccessRate: 0,\r\n            moisture: r.moisture_level,\r\n            temperature: r.temperature,\r\n          }))\r\n          setCropBatches(mapped)\r\n        }\r\n      } catch (e) {\r\n        // ignore network errors — fallback to localStorage\r\n      }\r\n    }\r\n\r\n    fetchServerBatches()\r\n  }, [farmer])\r\n\r\n  useEffect(() => {\r\n    if (farmer) {\r\n      localStorage.setItem(\"currentUser\", JSON.stringify(farmer))\r\n      localStorage.setItem(\"farmer\", JSON.stringify(farmer))\r\n    }\r\n  }, [farmer])\r\n\r\n  useEffect(() => {\r\n    // Persist cropBatches to a user-scoped key when possible\r\n    if (!loading) {\r\n      try {\r\n        const key = farmer ? `cropBatches_${farmer.id}` : \"cropBatches\"\r\n        localStorage.setItem(key, JSON.stringify(cropBatches))\r\n      } catch (e) {\r\n        // ignore storage errors\r\n      }\r\n    }\r\n  }, [cropBatches, farmer, loading])\r\n\r\n  const handleAddBatch = (newBatch: Omit<CropBatch, \"id\" | \"createdAt\" | \"lossEvents\" | \"interventionSuccessRate\">) => {\r\n    const parsedDate = newBatch.harvestDate ? new Date(newBatch.harvestDate) : new Date()\r\n\r\n    // If user is logged in, persist to server; otherwise fallback to localStorage\r\n    if (farmer) {\r\n      ;(async () => {\r\n        try {\r\n          // Attempt client-side insert first (uses the browser Supabase session)\r\n          const supabase = createClient()\r\n          const insertPayload = {\r\n            user_id: farmer.id,\r\n            crop_type: newBatch.cropType,\r\n            estimated_weight: newBatch.estimatedWeight,\r\n            harvest_date: newBatch.harvestDate ? new Date(newBatch.harvestDate).toISOString().slice(0, 10) : new Date().toISOString().slice(0, 10),\r\n            storage_location: newBatch.storageLocation,\r\n            storage_type: newBatch.storageType,\r\n            moisture_level: newBatch.moisture ?? null,\r\n            temperature: newBatch.temperature ?? null,\r\n            status: newBatch.status ?? \"active\",\r\n          }\r\n\r\n          const { data: inserted, error: insertError } = await supabase.from(\"crop_batches\").insert([insertPayload]).select().single()\r\n          let json: any = null\r\n          // If client-side succeeded, use that result\r\n          if (inserted && !insertError) {\r\n            json = { data: inserted }\r\n          } else {\r\n            // Fallback to server route if client insert failed (e.g., no session/cors)\r\n            // eslint-disable-next-line no-console\r\n            console.warn('/api/batches: client insert failed, falling back to server route', insertError)\r\n            const resp = await fetch(\"/api/batches\", {\r\n              method: \"POST\",\r\n              headers: { \"Content-Type\": \"application/json\" },\r\n              body: JSON.stringify(newBatch),\r\n            })\r\n            const text = await resp.text()\r\n            try {\r\n              json = JSON.parse(text)\r\n            } catch {\r\n              json = null\r\n            }\r\n            // eslint-disable-next-line no-console\r\n            console.debug('/api/batches POST status:', resp.status)\r\n          }\r\n          if (json?.data) {\r\n            const r = json.data\r\n            const batch: CropBatch = {\r\n              id: r.id,\r\n              cropType: r.crop_type,\r\n              estimatedWeight: Number(r.estimated_weight),\r\n              harvestDate: new Date(r.harvest_date).toISOString(),\r\n              storageLocation: r.storage_location,\r\n              storageType: r.storage_type,\r\n              status: r.status,\r\n              createdAt: r.created_at,\r\n              lossEvents: 0,\r\n              interventionSuccessRate: 0,\r\n            }\r\n            setCropBatches((s) => [batch, ...s])\r\n          } else {\r\n            // fallback to local\r\n            const batch: CropBatch = {\r\n              ...newBatch,\r\n              id: Date.now().toString(),\r\n              createdAt: new Date().toISOString(),\r\n              harvestDate: isNaN(parsedDate.getTime()) ? new Date().toISOString() : parsedDate.toISOString(),\r\n              lossEvents: 0,\r\n              interventionSuccessRate: 0,\r\n            }\r\n            setCropBatches((s) => [batch, ...s])\r\n          }\r\n        } catch (e) {\r\n          const batch: CropBatch = {\r\n            ...newBatch,\r\n            id: Date.now().toString(),\r\n            createdAt: new Date().toISOString(),\r\n            harvestDate: isNaN(parsedDate.getTime()) ? new Date().toISOString() : parsedDate.toISOString(),\r\n            lossEvents: 0,\r\n            interventionSuccessRate: 0,\r\n          }\r\n          setCropBatches((s) => [batch, ...s])\r\n        } finally {\r\n          setShowBatchForm(false)\r\n        }\r\n      })()\r\n    } else {\r\n      const batch: CropBatch = {\r\n        ...newBatch,\r\n        id: Date.now().toString(),\r\n        createdAt: new Date().toISOString(),\r\n        harvestDate: isNaN(parsedDate.getTime()) ? new Date().toISOString() : parsedDate.toISOString(),\r\n        lossEvents: 0,\r\n        interventionSuccessRate: 0,\r\n      }\r\n      setCropBatches([...cropBatches, batch])\r\n      setShowBatchForm(false)\r\n    }\r\n  }\r\n\r\n  const handleExportData = () => {\r\n    const data = {\r\n      farmer,\r\n      cropBatches,\r\n      exportedAt: new Date().toISOString(),\r\n    }\r\n\r\n    const dataStr = JSON.stringify(data, null, 2)\r\n    const csvContent = convertToCSV(cropBatches)\r\n\r\n    downloadFile(dataStr, \"harvest-guard-data.json\", \"application/json\")\r\n    downloadFile(csvContent, \"harvest-guard-crops.csv\", \"text/csv\")\r\n  }\r\n\r\n  const convertToCSV = (batches: CropBatch[]) => {\r\n    const headers = [\r\n      \"Batch ID\",\r\n      \"Crop Type\",\r\n      \"Weight (kg)\",\r\n      \"Harvest Date\",\r\n      \"Storage Location\",\r\n      \"Storage Type\",\r\n      \"Status\",\r\n      \"Loss Events\",\r\n      \"Success Rate %\",\r\n    ]\r\n    const rows = batches.map((batch) => [\r\n      batch.id,\r\n      batch.cropType,\r\n      batch.estimatedWeight,\r\n      batch.harvestDate,\r\n      batch.storageLocation,\r\n      batch.storageType,\r\n      batch.status,\r\n      batch.lossEvents,\r\n      batch.interventionSuccessRate,\r\n    ])\r\n\r\n    return [headers, ...rows].map((row) => row.join(\",\")).join(\"\\n\")\r\n  }\r\n\r\n  const downloadFile = (content: string, filename: string, type: string) => {\r\n    const element = document.createElement(\"a\")\r\n    element.setAttribute(\"href\", `data:${type};charset=utf-8,${encodeURIComponent(content)}`)\r\n    element.setAttribute(\"download\", filename)\r\n    element.style.display = \"none\"\r\n    document.body.appendChild(element)\r\n    element.click()\r\n    document.body.removeChild(element)\r\n  }\r\n\r\n  const handleLogout = () => {\r\n    // Preserve user data (batches) after logout so users can log back in\r\n    ;(async () => {\r\n      try {\r\n        // Clear local supabase session and then localStorage\r\n        const supabase = createClient()\r\n        await supabase.auth.signOut()\r\n      } catch (e) {\r\n        // If signOut fails, fall back to clearing local storage\r\n      } finally {\r\n        localStorage.removeItem(\"currentUser\")\r\n        localStorage.removeItem(\"farmer\")\r\n        window.location.href = \"/\"\r\n      }\r\n    })()\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background to-accent/5 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">{t.loading}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (!farmer) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background to-accent/5 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <p className=\"text-muted-foreground mb-4\">{t.please_login}</p>\r\n          <Link\r\n            href=\"/login\"\r\n            className=\"px-6 py-2 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-colors\"\r\n          >\r\n            {t.go_to_login}\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-accent/5 to-background\">\r\n      <div className=\"fixed inset-0 -z-10 opacity-10\">\r\n        <img\r\n          src=\"/rice-paddy-field-sunset-agriculture-bangladesh.jpg\"\r\n          alt=\"Background\"\r\n          className=\"w-full h-full object-cover\"\r\n        />\r\n        <div className=\"absolute inset-0 bg-gradient-to-br from-background to-background\"></div>\r\n      </div>\r\n\r\n      <header className=\"bg-background border-b border-muted shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n          <div className=\"flex justify-between items-center mb-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <img src=\"/images/whatsapp-20image-202025-11-27-20at-2012.jpeg\" alt=\"Logo\" className=\"w-8 h-8\" />\r\n              <h1 className=\"text-3xl font-bold text-foreground\">HarvestGuard</h1>\r\n            </div>\r\n            <div className=\"flex items-center gap-4\">\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"flex items-center gap-2 px-4 py-2 text-destructive hover:bg-destructive/10 rounded-lg transition-colors\"\r\n              >\r\n                <LogOut className=\"w-5 h-5\" />\r\n                <span>{t.logout}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex gap-2 flex-wrap\">\r\n            <Link\r\n              href=\"/dashboard\"\r\n              className=\"px-4 py-2 rounded-lg bg-primary text-primary-foreground font-medium transition-colors\"\r\n            >\r\n              {language === \"en\" ? \"Dashboard\" : \"ড্যাশবোর্ড\"}\r\n            </Link>\r\n            <Link\r\n              href=\"/weather\"\r\n              className=\"px-4 py-2 rounded-lg bg-muted text-muted-foreground hover:bg-muted/80 font-medium transition-colors\"\r\n            >\r\n              {language === \"en\" ? \"Weather\" : \"আবহাওয়া\"}\r\n            </Link>\r\n            <Link\r\n              href=\"/risk-analysis\"\r\n              className=\"px-4 py-2 rounded-lg bg-muted text-muted-foreground hover:bg-muted/80 font-medium transition-colors\"\r\n            >\r\n              {language === \"en\" ? \"Risk Analysis\" : \"ঝুঁকি বিশ্লেষণ\"}\r\n            </Link>\r\n            <Link\r\n              href=\"/crop-scanner\"\r\n              className=\"px-4 py-2 rounded-lg bg-muted text-muted-foreground hover:bg-muted/80 font-medium transition-colors\"\r\n            >\r\n              {language === \"en\" ? \"Crop Scanner\" : \"ফসল স্ক্যানার\"}\r\n            </Link>\r\n            <Link\r\n              href=\"/news-articles\"\r\n              className=\"px-4 py-2 rounded-lg bg-muted text-muted-foreground hover:bg-muted/80 font-medium transition-colors\"\r\n            >\r\n              {language === \"en\" ? \"News & Articles\" : \"সংবাদ ও নিবন্ধ\"}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n        <div className=\"mb-12\">\r\n          <h2 className=\"text-4xl font-bold text-foreground mb-2\">\r\n            {t.welcome}, {farmer.name}!\r\n          </h2>\r\n          <p className=\"text-lg text-muted-foreground\">\r\n            {language === \"en\"\r\n              ? \"Manage your crop batches and track food loss prevention\"\r\n              : \"আপনার ফসলের ব্যাচ পরিচালনা করুন এবং খাদ্য ক্ষতি প্রতিরোধ ট্র্যাক করুন\"}\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"grid lg:grid-cols-3 gap-8\">\r\n          <div className=\"lg:col-span-1\">\r\n            <FarmerProfile farmer={farmer} language={language} />\r\n\r\n            <div className=\"mt-6 space-y-3\">\r\n              <button\r\n                onClick={() => setShowBatchForm(!showBatchForm)}\r\n                className=\"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-colors\"\r\n              >\r\n                <Plus className=\"w-5 h-5\" />\r\n                <span>{t.new_batch}</span>\r\n              </button>\r\n              <button\r\n                onClick={handleExportData}\r\n                className=\"w-full flex items-center justify-center gap-2 px-6 py-3 border-2 border-primary text-primary rounded-lg font-semibold hover:bg-primary/5 transition-colors\"\r\n              >\r\n                <Download className=\"w-5 h-5\" />\r\n                <span>{t.export_data}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"lg:col-span-2\">\r\n            {showBatchForm ? (\r\n              <CropBatchForm\r\n                onSubmit={handleAddBatch}\r\n                onCancel={() => setShowBatchForm(false)}\r\n                language={language}\r\n                availableCrops={BANGLADESH_CROPS}\r\n              />\r\n            ) : (\r\n              <>\r\n                <h3 className=\"text-2xl font-bold text-foreground mb-6\">{t.crops}</h3>\r\n                {cropBatches.length === 0 ? (\r\n                  <div className=\"bg-background rounded-2xl p-12 text-center shadow-md border border-muted\">\r\n                    <p className=\"text-muted-foreground text-lg mb-6\">{t.no_batches}</p>\r\n                    <button\r\n                      onClick={() => setShowBatchForm(true)}\r\n                      className=\"px-6 py-3 bg-primary text-primary-foreground rounded-lg font-semibold hover:bg-primary/90 transition-colors inline-flex items-center gap-2\"\r\n                    >\r\n                      <Plus className=\"w-5 h-5\" />\r\n                      <span>{t.new_batch}</span>\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <CropBatchList batches={cropBatches} language={language} />\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}